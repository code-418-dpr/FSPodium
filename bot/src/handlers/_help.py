from pyrogram import types, enums, filters

from ..setup.web import PUBLIC_WEB_URL
from ..setup.pyro_client import bot
from ..setup.sqlite_orm import db_session, User


@bot.on_message(
        filters.private 
        & filters.command('help')
)
async def help_msg_handler(_, msg: types.Message) -> None:
    with db_session:
        user: User | None = User.get(id=msg.from_user.id)
    if not user or not user.role:
        msg_text = (
            'FSPodium –ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
            ' FSPodium, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞! –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Å–µ—Ä–≤–∏—Å–∞,'
            ' –ø–µ—Ä–µ–π–¥—è –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å'
            '  –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –±–æ—Ç–∞. üëÜüèª'
        )
    elif user.role == 'CENTRAL_REP':
        msg_text = (
            'FSPodium –ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
            ' FSPodium, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞! –í—ã –º–æ–∂–µ—Ç–µ:'
            '\n- –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞—è–≤–∫–∞—Ö –∏ –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö –≤'
            ' —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏;'
            '\n- –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞—è–≤–∫–∏ –∏ –æ–±—Ä–∞—â–µ–Ω–∏—è;'
            '\n- –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ, —á—Ç–æ –ø–æ–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –¥–ª—è'
            ' –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞. ‚ù§Ô∏è'
        )
    else:
        msg_text = (
            'FSPodium –ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
            ' FSPodium, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞! –í—ã –º–æ–∂–µ—Ç–µ:'
            '\n- –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è;'
            '\n- –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫ –∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏;'
            '\n- –æ–±—Ä–∞—â–∞—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (–∫–æ–º–∞–Ω–¥–∞ /support);'
            '\n- –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Å–≤–æ—ë–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ (–∫–æ–º–∞–Ω–¥–∞ /info);'
            '\n- –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ, —á—Ç–æ –ø–æ–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –¥–ª—è –≤–∞—à–µ–≥–æ'
            ' —É–¥–æ–±—Å—Ç–≤–∞. ‚ù§Ô∏è'
        )
    await msg.reply(
        msg_text,
        parse_mode=enums.ParseMode.MARKDOWN,
        reply_markup=types.InlineKeyboardMarkup([[
            types.InlineKeyboardButton('üîó –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ', url=PUBLIC_WEB_URL)
        ]])
    )

